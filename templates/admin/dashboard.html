<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Warpmonger</title>
    <link rel="stylesheet" href="/static/css/admin.css">
</head>
<body class="admin-page">
    <div class="admin-container">
        <!-- Left Panel: Navigation -->
        <div class="admin-sidebar">
            <div class="sidebar-header">
                <h2>Warpmonger</h2>
                <a href="/admin/logout" class="btn-logout">Logout</a>
            </div>

            <nav class="sidebar-nav">
                <div class="nav-section">
                    <h3 class="nav-section-header collapsed" onclick="toggleNavSection(this)">
                        <span class="nav-section-toggle"></span>
                        Categories
                    </h3>
                    <div class="nav-section-content" style="display: none;">
                        <button class="btn btn-primary btn-sm" onclick="showCreateCategory()">+ New Category</button>
                        <div class="admin-search-container">
                            <input
                                type="text"
                                id="category-search-input"
                                class="admin-search-input"
                                placeholder="Search categories..."
                                onkeyup="filterCategoryEntities(this.value)"
                            >
                        </div>
                        <div id="category-list" class="category-list sidebar-list"></div>
                    </div>
                </div>

                <div class="nav-section">
                    <h3 class="nav-section-header collapsed" onclick="toggleNavSection(this)">
                        <span class="nav-section-toggle"></span>
                        Products
                    </h3>
                    <div class="nav-section-content" style="display: none;">
                        <button class="btn btn-primary btn-sm" onclick="showCreateProduct()">+ New Product</button>
                        <div class="admin-search-container">
                            <input
                                type="text"
                                id="admin-search-input"
                                class="admin-search-input"
                                placeholder="Search products..."
                                onkeyup="filterProducts(this.value)"
                            >
                            <span class="search-clear" onclick="clearAdminSearch()" style="display: none;">&times;</span>
                        </div>
                        <div id="categories-list" class="categories-list sidebar-list"></div>
                    </div>
                </div>

                <div class="nav-section">
                    <h3 class="nav-section-header collapsed" onclick="toggleNavSection(this)">
                        <span class="nav-section-toggle"></span>
                        Blog
                    </h3>
                    <div class="nav-section-content" style="display: none;">
                        <button class="btn btn-primary btn-sm" onclick="showCreateBlog()">+ New Post</button>
                        <div class="admin-search-container">
                            <input
                                type="text"
                                id="blog-search-input"
                                class="admin-search-input"
                                placeholder="Search posts..."
                                onkeyup="filterBlogPosts(this.value)"
                            >
                        </div>
                        <div id="blog-list" class="blog-list sidebar-list"></div>
                    </div>
                </div>

                <div class="nav-section">
                    <h3 class="nav-section-header collapsed" onclick="toggleNavSection(this)">
                        <span class="nav-section-toggle"></span>
                        Promotions
                    </h3>
                    <div class="nav-section-content" style="display: none;">
                        <button class="btn btn-primary btn-sm" onclick="showCreatePromotion()">+ New Promotion</button>
                        <div class="admin-search-container">
                            <input
                                type="text"
                                id="promotion-search-input"
                                class="admin-search-input"
                                placeholder="Search promotions..."
                                onkeyup="filterPromotions(this.value)"
                            >
                        </div>
                        <div id="promotion-list" class="promotion-list sidebar-list"></div>
                    </div>
                </div>

                <div class="nav-section">
                    <h3 class="nav-section-header collapsed" onclick="toggleNavSection(this)">
                        <span class="nav-section-toggle"></span>
                        Codex
                    </h3>
                    <div class="nav-section-content" style="display: none;">
                        <button class="btn btn-primary btn-sm" onclick="showCreateCodex()">+ New Entry</button>
                        <div class="admin-search-container">
                            <input
                                type="text"
                                id="codex-search-input"
                                class="admin-search-input"
                                placeholder="Search codex..."
                                onkeyup="filterCodexEntries(this.value)"
                            >
                        </div>
                        <div id="codex-list" class="codex-list sidebar-list"></div>
                    </div>
                </div>

                <div class="nav-section">
                    <h3 class="nav-section-header collapsed" onclick="toggleNavSection(this)">
                        <span class="nav-section-toggle"></span>
                        Tags
                    </h3>
                    <div class="nav-section-content" style="display: none;">
                        <button class="btn btn-primary btn-sm" onclick="showCreateTag()">+ New Tag</button>
                        <div class="admin-search-container">
                            <input
                                type="text"
                                id="tag-search-input"
                                class="admin-search-input"
                                placeholder="Search tags..."
                                onkeyup="filterTags(this.value)"
                            >
                        </div>
                        <div id="tags-list" class="tags-list sidebar-list"></div>
                    </div>
                </div>

                <div class="nav-section">
                    <h3 class="nav-section-header collapsed" onclick="toggleNavSection(this)">
                        <span class="nav-section-toggle"></span>
                        Featured Tags
                    </h3>
                    <div class="nav-section-content" style="display: none;">
                        <button class="btn btn-primary btn-sm" onclick="showCreateFeaturedTag()">+ New Featured Tag</button>
                        <div id="featured-tags-list" class="featured-tags-list sidebar-list"></div>
                    </div>
                </div>

                <div class="nav-section">
                    <h3 class="nav-section-header collapsed" onclick="toggleNavSection(this)">
                        <span class="nav-section-toggle"></span>
                        Featured Products
                    </h3>
                    <div class="nav-section-content" style="display: none;">
                        <button class="btn btn-primary btn-sm" onclick="showFeaturedProductsEditor()">Manage Featured</button>
                        <div id="featured-products-count" style="padding: 10px; color: #999; font-size: 0.9rem;"></div>
                    </div>
                </div>

                <div class="nav-section">
                    <h3>Quick Links</h3>
                    <a href="/" target="_blank" class="nav-link">View Site</a>
                    <a href="/codex" target="_blank" class="nav-link">View Codex</a>
                    <a href="#" class="nav-link" onclick="clearCache(); return false;">Clear Cache</a>
                </div>
            </nav>
        </div>

        <!-- Center Panel: Editor -->
        <div class="admin-main">
            <div id="editor-container">
                <div id="welcome-screen" class="welcome-screen">
                    <h1>Welcome to Warpmonger Admin</h1>
                    <p>Select a category, product, or blog post to edit, or create a new one.</p>
                </div>

                <!-- Category Editor -->
                <div id="category-editor" class="editor" style="display: none;">
                    <h2 id="category-editor-title">Edit Category</h2>
                    <form id="category-form">
                        <input type="hidden" id="category-slug">

                        <div class="form-group">
                            <label for="category-name">Category Name *</label>
                            <input type="text" id="category-name" required>
                        </div>

                        <div class="form-group">
                            <label for="category-order-weight">Display Order Weight (higher = shows first)</label>
                            <input type="number" id="category-order-weight" value="0" placeholder="0">
                            <small style="color: #666; font-size: 0.875rem;">Categories with higher order weight appear first. Default is 0.</small>
                        </div>

                        <div class="form-group">
                            <label for="category-description">Description</label>
                            <textarea id="category-description" rows="4" placeholder="Optional category description"></textarea>
                        </div>

                        <div class="form-group">
                            <label>Category Icon</label>
                            <div id="category-icon-preview" style="margin-bottom: 10px;">
                                <!-- Icon will be displayed here -->
                            </div>
                            <input type="file" id="category-icon-upload" accept="image/*" onchange="uploadCategoryIcon()">
                            <small style="color: #666; font-size: 0.875rem;">Upload an icon image for this category</small>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Save Category</button>
                            <button type="button" class="btn btn-secondary" onclick="hideEditor()">Cancel</button>
                            <button type="button" class="btn btn-danger" onclick="deleteCategory()" id="delete-category-btn" style="margin-left: auto;">Delete Category</button>
                        </div>
                    </form>
                </div>

                <!-- Product Editor -->
                <div id="product-editor" class="editor" style="display: none;">
                    <h2 id="product-editor-title">Edit Product</h2>
                    <form id="product-form">
                        <input type="hidden" id="product-slug">
                        <input type="hidden" id="product-category">

                        <div class="form-row">
                            <div class="form-group">
                                <label for="product-id">Product ID</label>
                                <input type="text" id="product-id">
                            </div>

                            <div class="form-group">
                                <label for="product-sku">SKU</label>
                                <input type="text" id="product-sku">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="product-title">English Name *</label>
                            <input type="text" id="product-title" required>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="product-cn-name">Chinese Name (简体)</label>
                                <input type="text" id="product-cn-name">
                            </div>

                            <div class="form-group">
                                <label for="product-zhtw-name">Chinese Name (繁體)</label>
                                <input type="text" id="product-zhtw-name">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="product-series">Series</label>
                                <input type="text" id="product-series">
                            </div>

                            <div class="form-group">
                                <label for="product-scale">Scale</label>
                                <input type="text" id="product-scale" placeholder="e.g., Scale: 1/25">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="product-size">Size</label>
                                <input type="text" id="product-size" placeholder="e.g., 20*15*5">
                            </div>

                            <div class="form-group">
                                <label for="product-weight">Weight</label>
                                <input type="text" id="product-weight" placeholder="e.g., 0.2kg">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="product-order-weight">Display Order Weight (higher = shows first)</label>
                            <input type="number" id="product-order-weight" value="0" placeholder="0">
                            <small style="color: #666; font-size: 0.875rem;">Products with higher order weight appear first. Default is 0. Same weight = alphabetical order.</small>
                        </div>

                        <div class="form-group">
                            <label for="product-group">Product Group</label>
                            <input type="text" id="product-group" list="groups-datalist" placeholder="e.g., Shadow Jaeger Squad">
                            <datalist id="groups-datalist"></datalist>
                            <small style="color: #666; font-size: 0.875rem;">Group related products together for visual clustering in catalog and carousel on detail page.</small>
                        </div>

                        <h3 style="margin-top: 20px; margin-bottom: 10px; color: #667eea;">Pricing (Customer-facing)</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="product-price">Price (USD) *</label>
                                <input type="number" id="product-price" step="0.01" required>
                            </div>
                        </div>

                        <h3 style="margin-top: 20px; margin-bottom: 10px; color: #e74c3c;">Backend Only (Not shown to customers)</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="product-zhtw-price">Taiwan Price (TWD)</label>
                                <input type="number" id="product-zhtw-price" step="0.01">
                            </div>

                            <div class="form-group">
                                <label for="product-cost">Cost (USD)</label>
                                <input type="number" id="product-cost" step="0.01">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="product-final-price">Final Price (TWD)</label>
                                <input type="number" id="product-final-price" step="0.01">
                            </div>

                            <div class="form-group">
                                <label for="product-cost-tw">Cost Taiwan (TWD)</label>
                                <input type="number" id="product-cost-tw" step="0.01">
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Profit Margin (Calculated)</label>
                            <div id="profit-margin" style="padding: 10px; background: #f8f9fa; border-radius: 4px; font-weight: bold;">
                                -
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="product-category-select">Category *</label>
                            <input type="text" id="product-category-select" list="categories-datalist" required>
                            <datalist id="categories-datalist"></datalist>
                        </div>

                        <div class="form-group">
                            <label for="product-in-stock">
                                <input type="checkbox" id="product-in-stock" checked>
                                In Stock
                            </label>
                        </div>

                        <div class="form-group">
                            <label for="product-pre-order">
                                <input type="checkbox" id="product-pre-order" onchange="toggleAvailableDate()">
                                Pre-order
                            </label>
                        </div>

                        <div class="form-group" id="available-date-group" style="display: none;">
                            <label for="product-available-date">Available Date</label>
                            <input type="date" id="product-available-date">
                        </div>

                        <div class="form-group">
                            <label for="product-on-sale">
                                <input type="checkbox" id="product-on-sale" onchange="toggleSalePrice()">
                                On Sale
                            </label>
                        </div>

                        <div class="form-group" id="sale-price-group" style="display: none;">
                            <label for="product-sale-price">Sale Price</label>
                            <input type="number" id="product-sale-price" step="0.01">
                        </div>

                        <div class="form-group">
                            <label for="product-new-arrival">
                                <input type="checkbox" id="product-new-arrival">
                                New Arrival
                            </label>
                        </div>

                        <div class="form-group">
                            <label for="product-description">Description (Markdown)</label>
                            <textarea id="product-description" rows="10"></textarea>
                        </div>

                        <div class="form-group">
                            <label for="product-tags">Tags (one per line)</label>
                            <textarea id="product-tags" rows="5" placeholder="Red&#10;Children&#10;Age 3-6"></textarea>
                        </div>

                        <div class="form-group">
                            <label>Images</label>
                            <div class="image-upload-area">
                                <input type="file" id="image-upload" accept="image/*,video/*" multiple style="display: none;">
                                <button type="button" class="btn btn-secondary" onclick="document.getElementById('image-upload').click()">Upload Images/Videos</button>
                                <button type="button" class="btn btn-secondary" onclick="scanFolderForImages()">Scan Folder</button>
                                <div id="images-preview" class="images-preview sortable"></div>
                                <p style="margin-top: 10px; color: #666; font-size: 0.9em;">Drag and drop to reorder images</p>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Save Product</button>
                            <button type="button" class="btn btn-secondary" onclick="closeEditor()">Cancel</button>
                            <button type="button" class="btn btn-danger" onclick="deleteProduct()" id="delete-product-btn" style="display: none;">Delete</button>
                        </div>
                    </form>
                </div>

                <!-- Blog Editor -->
                <div id="blog-editor" class="editor" style="display: none;">
                    <h2 id="blog-editor-title">Edit Blog Post</h2>
                    <form id="blog-form">
                        <input type="hidden" id="blog-slug">

                        <div class="form-group">
                            <label for="blog-title">Title *</label>
                            <input type="text" id="blog-title" required>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="blog-date">Date</label>
                                <input type="date" id="blog-date">
                            </div>

                            <div class="form-group">
                                <label for="blog-author">Author</label>
                                <input type="text" id="blog-author">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="blog-excerpt">Excerpt</label>
                            <textarea id="blog-excerpt" rows="3"></textarea>
                        </div>

                        <div class="form-group">
                            <label for="blog-content">Content (Markdown)</label>
                            <textarea id="blog-content" rows="15"></textarea>
                        </div>

                        <div class="form-group">
                            <label>Insert Image</label>
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <input type="file" id="blog-image-upload" accept="image/*" style="flex: 1;">
                                <button type="button" class="btn btn-secondary" onclick="uploadBlogImage()">Upload & Insert</button>
                            </div>
                            <small style="color: #666;">Uploads image and inserts markdown at cursor position in content</small>
                        </div>

                        <div class="form-group">
                            <label for="blog-tags">Tags (comma-separated)</label>
                            <input type="text" id="blog-tags" placeholder="news, toys, updates">
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Save Post</button>
                            <button type="button" class="btn btn-secondary" onclick="closeEditor()">Cancel</button>
                            <button type="button" class="btn btn-danger" onclick="deleteBlogPost()" id="delete-blog-btn" style="display: none;">Delete</button>
                        </div>
                    </form>
                </div>

                <!-- Promotion Editor -->
                <div id="promotion-editor" class="editor" style="display: none;">
                    <h2 id="promotion-editor-title">Edit Promotion</h2>
                    <form id="promotion-form">
                        <input type="hidden" id="promotion-slug">

                        <div class="form-group">
                            <label for="promotion-title">Title *</label>
                            <input type="text" id="promotion-title" required>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="promotion-date">Date</label>
                                <input type="date" id="promotion-date">
                            </div>

                            <div class="form-group">
                                <label for="promotion-active">
                                    <input type="checkbox" id="promotion-active">
                                    Active (show banner on homepage)
                                </label>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="promotion-excerpt">Excerpt</label>
                            <textarea id="promotion-excerpt" rows="2"></textarea>
                        </div>

                        <div class="form-group">
                            <label>Banner Image</label>
                            <div id="promotion-banner-preview" style="margin-bottom: 10px;"></div>
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <input type="file" id="promotion-banner-upload" accept="image/*" style="flex: 1;">
                                <button type="button" class="btn btn-secondary" onclick="uploadPromotionBanner()">Upload Banner</button>
                            </div>
                            <small style="color: #666;">Recommended size: 1200x400px. This image will be shown on homepage when promotion is active.</small>
                        </div>

                        <div class="form-group">
                            <label for="promotion-content">Content (Markdown)</label>
                            <textarea id="promotion-content" rows="12"></textarea>
                        </div>

                        <div class="form-group">
                            <label>Insert Image</label>
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <input type="file" id="promotion-image-upload" accept="image/*" style="flex: 1;">
                                <button type="button" class="btn btn-secondary" onclick="uploadPromotionImage()">Upload & Insert</button>
                            </div>
                            <small style="color: #666;">Uploads image and inserts markdown at cursor position in content</small>
                        </div>

                        <div class="form-group">
                            <label>Featured Products</label>
                            <div id="promotion-products-list" class="promotion-products-list" style="margin-bottom: 10px; max-height: 200px; overflow-y: auto; border: 1px solid #ddd; border-radius: 4px; padding: 10px;">
                                <!-- Selected products will appear here -->
                                <p class="no-products-msg" style="color: #666; margin: 0;">No products selected</p>
                            </div>
                            <div class="promo-product-search-container" style="position: relative; margin-bottom: 10px;">
                                <input type="text" id="promotion-product-search" placeholder="Search products..." onkeyup="filterPromotionProductSelect(this.value)">
                                <span class="promo-search-clear" onclick="clearPromotionProductSearch()" style="display: none;">&times;</span>
                            </div>
                            <div id="promotion-product-results" class="promotion-product-results"></div>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Save Promotion</button>
                            <button type="button" class="btn btn-secondary" onclick="closeEditor()">Cancel</button>
                            <button type="button" class="btn btn-danger" onclick="deletePromotion()" id="delete-promotion-btn" style="display: none;">Delete</button>
                        </div>
                    </form>
                </div>

                <!-- Featured Products Editor -->
                <div id="featured-products-editor" class="editor" style="display: none;">
                    <h2>Manage Featured Products</h2>
                    <p style="color: #666; margin-bottom: 20px;">These products will be shown in the "Featured Products" section on the homepage. Drag to reorder.</p>

                    <div class="form-group">
                        <label>Current Featured Products</label>
                        <div id="featured-products-list" class="featured-products-sortable" style="min-height: 100px; border: 1px solid #ddd; border-radius: 4px; padding: 10px; margin-bottom: 15px;">
                            <p class="no-featured-msg" style="color: #999; margin: 0;">No featured products selected. Add products below.</p>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Add Products</label>
                        <div class="promo-product-search-container" style="position: relative; margin-bottom: 10px;">
                            <input type="text" id="featured-product-search" placeholder="Search products to add..." onkeyup="filterFeaturedProductSelect(this.value)">
                            <span class="featured-search-clear" onclick="clearFeaturedProductSearch()" style="display: none;">&times;</span>
                        </div>
                        <div id="featured-product-results" class="promotion-product-results"></div>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-primary" onclick="saveFeaturedProducts()">Save Changes</button>
                        <button type="button" class="btn btn-secondary" onclick="closeEditor()">Cancel</button>
                    </div>
                </div>

                <!-- Codex Editor -->
                <div id="codex-editor" class="editor" style="display: none;">
                    <h2 id="codex-editor-title">Edit Codex Entry</h2>
                    <form id="codex-form">
                        <input type="hidden" id="codex-slug">

                        <div class="form-group">
                            <label for="codex-title">Title *</label>
                            <input type="text" id="codex-title" required placeholder="e.g., Sanguinius">
                        </div>

                        <div class="form-group">
                            <label for="codex-aliases">Aliases (one per line)</label>
                            <textarea id="codex-aliases" rows="3" placeholder="Primarch Sanguinius&#10;The Great Angel&#10;Angel of Baal"></textarea>
                            <small style="color: #666; font-size: 0.875rem;">Alternative names that will also link to this entry</small>
                        </div>

                        <div class="form-group">
                            <label for="codex-content">Content (Markdown)</label>
                            <textarea id="codex-content" rows="12" placeholder="Write the lore/description here..."></textarea>
                        </div>

                        <div class="form-group">
                            <label>Usage</label>
                            <div style="padding: 10px; background: #f8f9fa; border-radius: 4px; font-size: 0.9rem; color: #666;">
                                Use <code style="background: #e9ecef; padding: 2px 6px; border-radius: 3px;">[[Title]]</code> or <code style="background: #e9ecef; padding: 2px 6px; border-radius: 3px;">[[Alias]]</code> in product descriptions to create a tooltip link.
                            </div>
                        </div>

                        <div class="form-group" id="codex-products-section" style="display: none;">
                            <label>Products using this codex (<span id="codex-product-count">0</span>)</label>
                            <div id="codex-products-list" class="codex-products-list">
                                <!-- Products will be listed here -->
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Save Entry</button>
                            <button type="button" class="btn btn-secondary" onclick="closeEditor()">Cancel</button>
                            <button type="button" class="btn btn-danger" onclick="deleteCodexEntry()" id="delete-codex-btn" style="display: none;">Delete</button>
                        </div>
                    </form>
                </div>

                <!-- Tag Editor -->
                <div id="tag-editor" class="editor" style="display: none;">
                    <h2 id="tag-editor-title">Edit Tag</h2>
                    <form id="tag-form">
                        <input type="hidden" id="tag-original-name">

                        <div class="form-group">
                            <label for="tag-name">Tag Name *</label>
                            <input type="text" id="tag-name" required>
                        </div>

                        <div class="form-group">
                            <label>Products with this tag (<span id="tag-product-count">0</span>)</label>
                            <div id="tag-products-list" class="tag-products-list">
                                <!-- Products will be listed here -->
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Add Product to Tag</label>
                            <div class="add-product-to-tag-container">
                                <input type="text" id="add-product-search" placeholder="Search product to add..." autocomplete="off">
                                <div id="add-product-autocomplete" class="admin-autocomplete-results"></div>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Save Tag</button>
                            <button type="button" class="btn btn-secondary" onclick="closeEditor()">Cancel</button>
                            <button type="button" class="btn btn-danger" onclick="deleteTag()" id="delete-tag-btn">Delete Tag</button>
                        </div>
                    </form>
                </div>

                <!-- Featured Tag Editor -->
                <div id="featured-tag-editor" class="editor" style="display: none;">
                    <h2 id="featured-tag-editor-title">Edit Featured Tag</h2>
                    <form id="featured-tag-form">
                        <input type="hidden" id="featured-tag-original-name">

                        <div class="form-group">
                            <label for="featured-tag-name">Tag Name *</label>
                            <input type="text" id="featured-tag-name" required placeholder="e.g., Ultramarines">
                            <small style="color: #666; font-size: 0.875rem;">This must match an existing product tag exactly</small>
                        </div>

                        <div class="form-group">
                            <label for="featured-tag-order-weight">Display Order (higher = first)</label>
                            <input type="number" id="featured-tag-order-weight" value="0" placeholder="0">
                        </div>

                        <div class="form-group">
                            <label>Icon</label>
                            <div id="featured-tag-icon-preview" style="margin-bottom: 10px; width: 100px; height: 100px; background: #1a1a1a; border-radius: 4px; display: flex; align-items: center; justify-content: center;">
                                <span style="color: #666;">No icon</span>
                            </div>
                            <input type="file" id="featured-tag-icon-upload" accept="image/*" onchange="uploadFeaturedTagIcon()">
                            <small style="color: #666; font-size: 0.875rem;">Upload an icon for this featured tag</small>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Save Featured Tag</button>
                            <button type="button" class="btn btn-secondary" onclick="closeEditor()">Cancel</button>
                            <button type="button" class="btn btn-danger" onclick="deleteFeaturedTag()" id="delete-featured-tag-btn" style="display: none;">Delete</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Right Panel: Preview -->
        <div class="admin-preview">
            <h3>Preview</h3>
            <div id="preview-container" class="preview-content">
                <p class="preview-placeholder">Preview will appear here...</p>
            </div>
        </div>
    </div>

    <script src="/static/js/admin.js?v=9"></script>
</body>
</html>

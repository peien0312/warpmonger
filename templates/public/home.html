{% extends "public/base.html" %}

{% block title %}Warpmonger - Premium Action Figures By John{% endblock %}

{% block meta_description %}Warpmonger - By John Action Figure. Shop our curated selection of premium action figures from Warhammer, Infinity, Dark Source, TMNT, and more. Quality collectibles with fast shipping and great prices.{% endblock %}

{% block content %}
<section class="hero">
    <div class="container">
        <h2>Welcome to Warpmonger</h2>
        <p>Premium Action Figures & Collectibles</p>
        <a href="/products" class="btn btn-primary btn-lg">Shop Now</a>
    </div>
</section>

<section class="categories-section">
    <div class="container">
        <h2>Shop by Category</h2>
        <div class="categories-grid">
            {% for category in categories %}
            <a href="/products?category={{ category.slug }}" class="category-card">
                {% if category.icon %}
                <div class="category-icon">
                    <img src="/static/images/categories/{{ category.slug }}/{{ category.icon }}" alt="{{ category.name }}">
                </div>
                {% endif %}
                <h3>{{ category.name }}</h3>
            </a>
            {% endfor %}
            {% if not categories %}
            <p>No categories available yet.</p>
            {% endif %}
        </div>
    </div>
</section>

{% if new_arrivals %}
<section class="new-arrivals">
    <div class="container">
        <h2>New Arrivals</h2>
        <div class="products-grid">
            {% for product in new_arrivals %}
            <div class="product-card">
                <a href="/products/{{ product.category }}/{{ product.slug }}">
                    <div class="product-image-container">
                        {% if product.images %}
                        <img src="/static/images/products/{{ product.category }}/{{ product.slug }}/thumb_{{ product.images[0].rsplit('.', 1)[0] }}.jpg"
                             alt="{{ product.title }} - Premium action figure - ${{ '%.2f'|format(product.price) }}"
                             loading="lazy">
                        {% else %}
                        <div class="product-placeholder">No Image</div>
                        {% endif %}

                        <div class="product-badges">
                            <span class="badge badge-new">New</span>
                        </div>
                    </div>

                    <h3>{{ product.title }}</h3>

                    {% if product.is_on_sale and product.sale_price > 0 %}
                    <p class="price">
                        <span class="original-price">${{ "%.2f"|format(product.price) }}</span>
                        <span class="sale-price">${{ "%.2f"|format(product.sale_price) }}</span>
                    </p>
                    {% else %}
                    <p class="price">${{ "%.2f"|format(product.price) }}</p>
                    {% endif %}
                </a>
            </div>
            {% endfor %}
        </div>
        <a href="/products?new_arrival=true" class="btn btn-secondary">View All New Arrivals</a>
    </div>
</section>
{% endif %}

{% if on_sale %}
<section class="on-sale">
    <div class="container">
        <h2>On Sale Now</h2>
        <div class="products-grid">
            {% for product in on_sale %}
            <div class="product-card">
                <a href="/products/{{ product.category }}/{{ product.slug }}">
                    <div class="product-image-container">
                        {% if product.images %}
                        <img src="/static/images/products/{{ product.category }}/{{ product.slug }}/thumb_{{ product.images[0].rsplit('.', 1)[0] }}.jpg"
                             alt="{{ product.title }} - Premium action figure - ${{ '%.2f'|format(product.price) }}"
                             loading="lazy">
                        {% else %}
                        <div class="product-placeholder">No Image</div>
                        {% endif %}

                        <div class="product-badges">
                            <span class="badge badge-sale">Sale</span>
                        </div>
                    </div>

                    <h3>{{ product.title }}</h3>

                    {% if product.sale_price > 0 %}
                    <p class="price">
                        <span class="original-price">${{ "%.2f"|format(product.price) }}</span>
                        <span class="sale-price">${{ "%.2f"|format(product.sale_price) }}</span>
                    </p>
                    {% else %}
                    <p class="price">${{ "%.2f"|format(product.price) }}</p>
                    {% endif %}
                </a>
            </div>
            {% endfor %}
        </div>
        <a href="/products?on_sale=true" class="btn btn-secondary">View All Sale Items</a>
    </div>
</section>
{% endif %}

<section class="featured-products">
    <div class="container">
        <h2>Featured Products</h2>
        <div class="products-grid">
            {% for product in products %}
            <div class="product-card">
                <a href="/products/{{ product.category }}/{{ product.slug }}">
                    <div class="product-image-container">
                        {% if product.images %}
                        <img src="/static/images/products/{{ product.category }}/{{ product.slug }}/thumb_{{ product.images[0].rsplit('.', 1)[0] }}.jpg"
                             alt="{{ product.title }} - Premium action figure - ${{ '%.2f'|format(product.price) }}"
                             loading="lazy">
                        {% else %}
                        <div class="product-placeholder">No Image</div>
                        {% endif %}

                        {# Product badges #}
                        <div class="product-badges">
                            {% if not product.in_stock %}
                            <span class="badge badge-soldout">Sold Out</span>
                            {% endif %}
                            {% if product.is_pre_order %}
                            <span class="badge badge-preorder">Pre-order</span>
                            {% endif %}
                            {% if product.is_on_sale %}
                            <span class="badge badge-sale">Sale</span>
                            {% endif %}
                            {% if product.is_new_arrival %}
                            <span class="badge badge-new">New</span>
                            {% endif %}
                        </div>
                    </div>

                    <h3>{{ product.title }}</h3>

                    {% if product.is_on_sale and product.sale_price > 0 %}
                    <p class="price">
                        <span class="original-price">${{ "%.2f"|format(product.price) }}</span>
                        <span class="sale-price">${{ "%.2f"|format(product.sale_price) }}</span>
                    </p>
                    {% else %}
                    <p class="price">${{ "%.2f"|format(product.price) }}</p>
                    {% endif %}
                </a>
            </div>
            {% endfor %}
            {% if not products %}
            <p>No products available yet.</p>
            {% endif %}
        </div>
    </div>
</section>

{% if posts %}
<section class="recent-posts">
    <div class="container">
        <h2>Recent Blog Posts</h2>
        <div class="posts-grid">
            {% for post in posts %}
            <article class="post-card">
                <h3><a href="/blog/{{ post.slug }}">{{ post.title }}</a></h3>
                <p class="post-meta">{{ post.date }} {% if post.author %}by {{ post.author }}{% endif %}</p>
                <p>{{ post.excerpt }}</p>
                <a href="/blog/{{ post.slug }}" class="read-more">Read more â†’</a>
            </article>
            {% endfor %}
        </div>
        <a href="/blog" class="btn btn-secondary">View All Posts</a>
    </div>
</section>
{% endif %}
{% endblock %}
